{#
   Loading Skeleton Components
   Usage: {% include "components/feedback/skeleton.html" %}

   Parameters:
   - variant: text, heading, avatar, card, table-row, image (default: text)
   - lines: Number of lines for text variant (default: 1)
   - width: Width class (e.g., w-full, w-3/4, w-1/2)
   - height: Height class for non-text variants
   - class: Additional CSS classes
#}
{% macro skeleton_base() %}
<div class="animate-pulse bg-slate-200 dark:bg-slate-700 rounded {{ caller() }}"></div>
{% endmacro %}

{% if variant == 'heading' %}
<div class="animate-pulse">
    <div class="h-8 bg-slate-200 dark:bg-slate-700 rounded {{ width | default('w-1/2') }} {{ class }}"></div>
</div>

{% elif variant == 'avatar' %}
<div class="animate-pulse">
    <div class="rounded-full bg-slate-200 dark:bg-slate-700 {{ height | default('h-10') }} {{ width | default('w-10') }} {{ class }}"></div>
</div>

{% elif variant == 'card' %}
<div class="animate-pulse rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-700 dark:bg-slate-800 {{ class }}">
    <div class="flex items-center gap-4 mb-4">
        <div class="h-10 w-10 rounded-full bg-slate-200 dark:bg-slate-700"></div>
        <div class="flex-1 space-y-2">
            <div class="h-4 bg-slate-200 dark:bg-slate-700 rounded w-1/2"></div>
            <div class="h-3 bg-slate-200 dark:bg-slate-700 rounded w-1/4"></div>
        </div>
    </div>
    <div class="space-y-3">
        <div class="h-4 bg-slate-200 dark:bg-slate-700 rounded w-full"></div>
        <div class="h-4 bg-slate-200 dark:bg-slate-700 rounded w-5/6"></div>
        <div class="h-4 bg-slate-200 dark:bg-slate-700 rounded w-4/6"></div>
    </div>
</div>

{% elif variant == 'table-row' %}
<tr class="animate-pulse">
    <td class="px-6 py-4 whitespace-nowrap">
        <div class="flex items-center gap-3">
            <div class="h-10 w-10 rounded-full bg-slate-200 dark:bg-slate-700"></div>
            <div class="space-y-2">
                <div class="h-4 bg-slate-200 dark:bg-slate-700 rounded w-32"></div>
                <div class="h-3 bg-slate-200 dark:bg-slate-700 rounded w-24"></div>
            </div>
        </div>
    </td>
    <td class="px-6 py-4"><div class="h-4 bg-slate-200 dark:bg-slate-700 rounded w-20"></div></td>
    <td class="px-6 py-4"><div class="h-6 bg-slate-200 dark:bg-slate-700 rounded-full w-16"></div></td>
    <td class="px-6 py-4"><div class="h-4 bg-slate-200 dark:bg-slate-700 rounded w-24"></div></td>
    <td class="px-6 py-4"><div class="h-4 bg-slate-200 dark:bg-slate-700 rounded w-16"></div></td>
</tr>

{% elif variant == 'image' %}
<div class="animate-pulse bg-slate-200 dark:bg-slate-700 rounded {{ height | default('h-48') }} {{ width | default('w-full') }} {{ class }}"></div>

{% else %}
{# Default: text lines #}
<div class="animate-pulse space-y-2 {{ class }}">
    {% for i in range(lines | default(1)) %}
    <div class="h-4 bg-slate-200 dark:bg-slate-700 rounded {% if loop.last and lines > 1 %}w-4/5{% else %}{{ width | default('w-full') }}{% endif %}"></div>
    {% endfor %}
</div>
{% endif %}
