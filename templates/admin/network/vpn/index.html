{% extends "layouts/admin.html" %}
{% from "components/ui/macros.html" import ambient_background, page_header, action_button, status_badge, row_action, empty_state, card, icon_plus, icon_view, animation_styles %}

{% block title %}VPN - Admin{% endblock %}

{% block content %}
{{ ambient_background("violet", "purple") }}

<div class="relative space-y-6">
    {% if success_message %}
    <script>
        window.addEventListener('load', () => {
            const message = {{ success_message | tojson }};
            window.dispatchEvent(new CustomEvent('show-toast', {
                detail: { message, type: 'success' }
            }));
        });
    </script>
    {% endif %}
    {# Page Header #}
    {% set wg_icon %}
    <svg class="h-7 w-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
    </svg>
    {% endset %}

    {% call page_header(
        title="VPN",
        subtitle="Modern VPN tunnels for network devices - faster and simpler than OpenVPN",
        icon=wg_icon,
        color="violet",
        color2="purple"
    ) %}
        {{ action_button("New Server", "/admin/network/vpn/servers/new", icon_plus(), "secondary", "violet", "purple") }}
        {% if server and not needs_setup %}
        {{ action_button("Add Peer", "/admin/network/vpn/servers/" ~ server.id ~ "/peers/new", icon_plus(), "secondary", "violet", "purple") }}
        {% endif %}
    {% endcall %}

    {% if not server %}
    {# No Servers - Empty State #}
    <div class="animate-fade-in-up rounded-2xl border border-slate-200/60 bg-white p-12 text-center shadow-sm dark:border-slate-700/60 dark:bg-slate-800" style="animation-delay: 50ms;">
        <div class="mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br from-violet-100 to-purple-100 dark:from-violet-900/40 dark:to-purple-900/30">
            <svg class="h-8 w-8 text-violet-600 dark:text-violet-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
            </svg>
        </div>
        <h3 class="mt-4 text-lg font-semibold text-slate-900 dark:text-white">No VPN Servers</h3>
        <p class="mt-2 text-sm text-slate-500 dark:text-slate-400">Create your first VPN server to start managing VPN tunnels.</p>
        <div class="mt-6">
            {{ action_button("Create Server", "/admin/network/vpn/servers/new", icon_plus(), "primary", "violet", "purple") }}
        </div>
    </div>
    {% else %}

    {# Server Tabs #}
    {% if servers|length > 1 %}
    <div class="animate-fade-in-up rounded-2xl border border-slate-200/60 bg-white p-2 shadow-sm dark:border-slate-700/60 dark:bg-slate-800" style="animation-delay: 50ms;">
        <nav class="flex flex-wrap gap-1" aria-label="VPN Servers">
            {% for srv in servers %}
            <a href="/admin/network/vpn?server_id={{ srv.server.id }}"
               class="group flex items-center gap-2 rounded-xl px-4 py-2.5 text-sm font-medium transition-all
                      {% if srv.is_selected %}
                      bg-gradient-to-r from-violet-500 to-purple-600 text-white shadow-lg shadow-violet-500/25
                      {% else %}
                      text-slate-600 hover:bg-violet-50 dark:text-slate-300 dark:hover:bg-violet-900/20
                      {% endif %}">
                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"/>
                </svg>
                <span>{{ srv.server.name }}</span>
                <span class="rounded-lg px-2 py-0.5 text-xs font-semibold transition-colors
                            {% if srv.is_selected %}bg-white/20 text-white{% else %}bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300{% endif %}">
                    {{ srv.peer_count }}
                </span>
                {% if srv.needs_setup %}
                <span class="h-2 w-2 rounded-full bg-amber-400 animate-pulse" title="Setup required"></span>
                {% endif %}
            </a>
            {% endfor %}
        </nav>
    </div>
    {% endif %}

    {# Selected Server Info #}
    <div class="animate-fade-in-up flex items-center justify-between rounded-2xl border border-slate-200/60 bg-white px-5 py-3 shadow-sm dark:border-slate-700/60 dark:bg-slate-800" style="animation-delay: 100ms;">
        <div class="flex flex-wrap items-center gap-4">
            <span class="text-sm font-semibold text-slate-900 dark:text-white">{{ server.name }}</span>
            <span class="inline-flex items-center rounded-lg bg-slate-100 px-2.5 py-1 text-xs font-mono text-slate-600 dark:bg-slate-700 dark:text-slate-300">Port {{ server.listen_port }}/UDP</span>
            <span class="inline-flex items-center rounded-lg bg-slate-100 px-2.5 py-1 text-xs font-mono text-slate-600 dark:bg-slate-700 dark:text-slate-300">{{ server.vpn_address }}</span>
            {% if server.vpn_address_v6 %}
            <span class="inline-flex items-center rounded-lg bg-slate-100 px-2.5 py-1 text-xs font-mono text-slate-600 dark:bg-slate-700 dark:text-slate-300">{{ server.vpn_address_v6 }}</span>
            {% endif %}
            <span class="inline-flex items-center gap-1.5 rounded-lg bg-gradient-to-r from-violet-500/10 to-purple-500/10 px-2.5 py-1 text-xs font-semibold text-violet-700 dark:from-violet-500/20 dark:to-purple-500/20 dark:text-violet-400">
                <svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
                VPN
            </span>
        </div>
        <a href="/admin/network/vpn/servers/{{ server.id }}/edit" class="text-sm font-medium text-violet-600 hover:text-violet-700 dark:text-violet-400 dark:hover:text-violet-300">
            Edit Server
        </a>
    </div>

    {% if needs_setup %}
    {# Keys Not Generated #}
    <div class="animate-fade-in-up rounded-2xl border border-amber-200/60 bg-gradient-to-r from-amber-50 to-orange-50 p-6 shadow-sm dark:border-amber-800/40 dark:from-amber-900/20 dark:to-orange-900/10" style="animation-delay: 150ms;">
        <div class="flex items-start gap-4">
            <div class="flex h-14 w-14 shrink-0 items-center justify-center rounded-2xl bg-gradient-to-br from-amber-500 to-orange-600 shadow-lg shadow-amber-500/25">
                <svg class="h-7 w-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"/>
                </svg>
            </div>
            <div class="flex-1">
                <h3 class="text-lg font-bold text-amber-900 dark:text-amber-100">Keys Not Generated</h3>
                <p class="mt-1 text-sm text-amber-700 dark:text-amber-300">
                    VPN keys are generated automatically when the server is created. If you see this message, something went wrong.
                </p>
                <div class="mt-4">
                    <form action="/admin/network/vpn/servers/{{ server.id }}/regenerate-keys" method="POST" class="inline">
                        {% include "components/forms/csrf_input.html" %}
                        <button type="submit" class="inline-flex items-center gap-2 rounded-xl bg-gradient-to-r from-amber-500 to-orange-600 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-amber-500/25 transition-all hover:shadow-xl hover:shadow-amber-500/30">
                            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
                            Regenerate Keys
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    {% else %}

    {# Server Connection Info #}
    <div class="animate-fade-in-up rounded-2xl border border-slate-200/60 bg-white p-5 shadow-sm dark:border-slate-700/60 dark:bg-slate-800" style="animation-delay: 150ms;">
        <div class="flex flex-wrap items-center justify-between gap-4">
            <div class="flex flex-wrap items-center gap-4 sm:gap-6">
                <div class="flex items-center gap-2">
                    {% if interface_status and interface_status.is_up %}
                    {{ status_badge("Running", "online", pulse=True) }}
                    {% elif server.is_active %}
                    {{ status_badge("Not Deployed", "warning") }}
                    {% else %}
                    {{ status_badge("Inactive", "offline") }}
                    {% endif %}
                </div>
                <div class="hidden h-6 w-px bg-slate-200 dark:bg-slate-700 sm:block"></div>
                <div class="text-sm text-slate-600 dark:text-slate-300">
                    <span class="font-semibold">{{ server.public_host or 'Public IP not set' }}</span>:{{ server.public_port or server.listen_port }}
                </div>
                <div class="hidden h-6 w-px bg-slate-200 dark:bg-slate-700 sm:block"></div>
                <div class="flex items-center gap-2">
                    <span class="text-xs text-slate-500 dark:text-slate-400">Interface:</span>
                    <code class="rounded bg-slate-100 px-2 py-0.5 text-xs font-mono text-slate-600 dark:bg-slate-700 dark:text-slate-300">{{ server.interface_name }}</code>
                </div>
                <div class="hidden h-6 w-px bg-slate-200 dark:bg-slate-700 sm:block"></div>
                <div class="flex items-center gap-2">
                    <span class="text-xs text-slate-500 dark:text-slate-400">Peers:</span>
                    <span class="text-xs font-medium text-slate-600 dark:text-slate-300">{{ interface_status.peers | length if interface_status else 0 }} connected</span>
                </div>
            </div>
            <div class="flex items-center gap-2">
                {% if interface_status and interface_status.is_up %}
                <form action="/admin/network/vpn/servers/{{ server.id }}/deploy" method="POST" class="inline">
                    {% include "components/forms/csrf_input.html" %}
                    <button type="submit" class="inline-flex items-center gap-1.5 rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-xs font-medium text-slate-600 transition-all hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600" title="Reload configuration">
                        <svg class="h-3.5 w-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
                        Reload
                    </button>
                </form>
                <form action="/admin/network/vpn/servers/{{ server.id }}/undeploy" method="POST" class="inline">
                    {% include "components/forms/csrf_input.html" %}
                    <button type="submit" class="inline-flex items-center gap-1.5 rounded-lg border border-red-200 bg-white px-3 py-1.5 text-xs font-medium text-red-600 transition-all hover:bg-red-50 dark:border-red-800 dark:bg-slate-700 dark:text-red-400 dark:hover:bg-red-900/20" title="Stop interface">
                        <svg class="h-3.5 w-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"/></svg>
                        Stop
                    </button>
                </form>
                {% else %}
                <form action="/admin/network/vpn/servers/{{ server.id }}/deploy" method="POST" class="inline">
                    {% include "components/forms/csrf_input.html" %}
                    <button type="submit" class="inline-flex items-center gap-1.5 rounded-lg bg-gradient-to-r from-emerald-500 to-green-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm transition-all hover:shadow-md" title="Deploy and start interface">
                        <svg class="h-3.5 w-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                        Deploy
                    </button>
                </form>
                {% endif %}
            </div>
        </div>
    </div>

    {# Peers Table #}
    {% if peers %}
    <div class="animate-fade-in-up rounded-2xl border border-slate-200/60 bg-white shadow-sm dark:border-slate-700/60 dark:bg-slate-800" style="animation-delay: 200ms;">
        <div class="flex items-center justify-between border-b border-slate-200/60 px-6 py-4 dark:border-slate-700/60">
            <div class="flex items-center gap-3">
                <div class="flex h-9 w-9 items-center justify-center rounded-lg bg-gradient-to-br from-violet-100 to-purple-100 dark:from-violet-900/40 dark:to-purple-900/30">
                    <svg class="h-4 w-4 text-violet-600 dark:text-violet-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                </div>
                <h2 class="font-semibold text-slate-900 dark:text-white">VPN Peers</h2>
            </div>
            <span class="rounded-lg bg-violet-100 px-2.5 py-1 text-xs font-semibold text-violet-700 dark:bg-violet-900/30 dark:text-violet-400">{{ peers | length }}</span>
        </div>
        <div class="overflow-x-auto">
            <table class="min-w-full">
                <thead>
                    <tr class="border-b border-slate-100 bg-gradient-to-r from-slate-50 to-slate-100/50 dark:border-slate-700/50 dark:from-slate-800/80 dark:to-slate-800/50">
                        <th class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-400 dark:text-slate-500">Peer</th>
                        <th class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-400 dark:text-slate-500">Linked Device</th>
                        <th class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-400 dark:text-slate-500">Status</th>
                        <th class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-400 dark:text-slate-500">Last Handshake</th>
                        <th class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-400 dark:text-slate-500">Traffic</th>
                        <th class="px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-400 dark:text-slate-500">Actions</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-slate-100 dark:divide-slate-700/50">
                    {% for peer in peers %}
                    <tr class="group hover:bg-slate-50/50 dark:hover:bg-slate-700/30 transition-colors">
                        <td class="px-6 py-4">
                            <div class="flex items-center gap-3">
                                <div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-violet-100 to-purple-100 dark:from-violet-900/40 dark:to-purple-900/30">
                                    <svg class="h-5 w-5 text-violet-600 dark:text-violet-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                                    </svg>
                                </div>
                                <div>
                                    <a href="/admin/network/vpn/peers/{{ peer.id }}" class="font-medium text-slate-900 hover:text-violet-600 dark:text-white dark:hover:text-violet-400">{{ peer.name }}</a>
                                    <div class="text-xs text-slate-500 font-mono">
                                        {{ peer.peer_address }}
                                        {% if peer.peer_address_v6 %}
                                        <span class="ml-2">{{ peer.peer_address_v6 }}</span>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-sm text-slate-600 dark:text-slate-300">
                            {% if peer.nas_device_name %}
                            <span class="inline-flex items-center gap-1.5 rounded-lg bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-700 dark:bg-blue-900/30 dark:text-blue-400">
                                <svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"/></svg>
                                {{ peer.nas_device_name }}
                            </span>
                            {% elif peer.network_device_name %}
                            <span class="inline-flex items-center gap-1.5 rounded-lg bg-emerald-100 px-2 py-0.5 text-xs font-medium text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400">
                                <svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"/></svg>
                                {{ peer.network_device_name }}
                            </span>
                            {% elif peer.pop_site_name %}
                            <span class="inline-flex items-center gap-1.5 rounded-lg bg-amber-100 px-2 py-0.5 text-xs font-medium text-amber-700 dark:bg-amber-900/30 dark:text-amber-400">
                                <svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>
                                {{ peer.pop_site_name }}
                            </span>
                            {% else %}
                            <span class="text-slate-400 dark:text-slate-500">-</span>
                            {% endif %}
                        </td>
                        <td class="px-6 py-4">
                        {% if peer.status.value == 'active' %}
                        {{ status_badge("Enabled", "online") }}
                        {% else %}
                        {{ status_badge("Disabled", "offline") }}
                        {% endif %}
                        </td>
                        <td class="px-6 py-4 text-sm text-slate-600 dark:text-slate-300">
                            {% if peer.last_handshake_at %}
                            <span title="{{ peer.last_handshake_at }}">{{ peer.last_handshake_at.strftime('%Y-%m-%d %H:%M') }}</span>
                            {% else %}
                            <span class="text-slate-400 dark:text-slate-500">Never</span>
                            {% endif %}
                        </td>
                        <td class="px-6 py-4 text-sm">
                            <div class="flex items-center gap-3">
                                <span class="inline-flex items-center gap-1 text-emerald-600 dark:text-emerald-400" title="Received">
                                    <svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/></svg>
                                    {{ ((peer.rx_bytes or 0) / 1048576) | round(1) }} MB
                                </span>
                                <span class="inline-flex items-center gap-1 text-blue-600 dark:text-blue-400" title="Sent">
                                    <svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"/></svg>
                                    {{ ((peer.tx_bytes or 0) / 1048576) | round(1) }} MB
                                </span>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-right">
                            <div class="flex items-center justify-end gap-2">
                                {{ row_action("/admin/network/vpn/peers/" ~ peer.id, icon_view(), "View") }}
                                <a href="/admin/network/vpn/peers/{{ peer.id }}/edit" class="rounded-lg p-2 text-slate-400 transition-colors hover:bg-slate-100 hover:text-slate-600 dark:hover:bg-slate-700 dark:hover:text-slate-300">
                                    <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/></svg>
                                </a>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% else %}
    {# No Peers #}
    <div class="animate-fade-in-up rounded-2xl border border-slate-200/60 bg-white p-12 text-center shadow-sm dark:border-slate-700/60 dark:bg-slate-800" style="animation-delay: 200ms;">
        <div class="mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br from-violet-100 to-purple-100 dark:from-violet-900/40 dark:to-purple-900/30">
            <svg class="h-8 w-8 text-violet-600 dark:text-violet-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/>
            </svg>
        </div>
        <h3 class="mt-4 text-lg font-semibold text-slate-900 dark:text-white">No Peers Yet</h3>
        <p class="mt-2 text-sm text-slate-500 dark:text-slate-400">Add your first VPN peer to establish a VPN tunnel.</p>
        <div class="mt-6">
            {{ action_button("Add Peer", "/admin/network/vpn/servers/" ~ server.id ~ "/peers/new", icon_plus(), "secondary", "violet", "purple") }}
        </div>
    </div>
    {% endif %}

    {% endif %}
    {% endif %}
</div>
{% endblock %}
